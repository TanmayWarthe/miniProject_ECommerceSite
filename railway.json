
{
  "$schema": "https://railway.app/railway.schema.json",
  "services": [
    {
      "name": "backend",
      "builder": "dockerfile",
      "dockerfilePath": "./Dockerfile",
      "domains": [
        {
          "domain": "ecommerce-backend.up.railway.app"
        }
      ],
      "env": {
        "PORT": "3000",
        "DB_HOST": "db",
        "DB_USER": "${{services.db.user}}",
        "DB_PASSWORD": "${{services.db.password}}",
        "DB_NAME": "${{services.db.database}}",
        "JWT_SECRET": "change_me"
      },
      "dependsOn": [
        "db"
      ]
    },
    {
      "name": "db",
      "image": "mysql:8.0",
      "env": {
        "MYSQL_ROOT_PASSWORD": "rootpassword",
        "MYSQL_DATABASE": "ecommerce_db",
        "MYSQL_USER": "ecommerce_user",
        "MYSQL_PASSWORD": "ecommerce_pass"
      }
    }
  ]
}
